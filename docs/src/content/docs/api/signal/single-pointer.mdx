---
title: Single Pointer
description: Unified pointer input signal API
---

SinglePointer provides a unified interface for handling mouse, touch, and pointer events with object pooling for zero GC overhead.

## Installation

```bash
npm install --save @cereb/single-pointer
```

## Basic Usage

```typescript
import { singlePointer } from "@cereb/single-pointer";

const element = document.getElementById("target")!;
const stream = singlePointer(element);

/**
 * pointer is not native pointer event, it is a pointer signal
 */
stream.subscribe((pointer) => {
  switch (pointer.phase) {
    case "move":
      console.log(pointer.x, pointer.y);
  }
});
```

## API

### `singlePointer(element, options?)`

Creates a SinglePointer observable from an element.

```typescript
function singlePointer(
  element: HTMLElement,
  options?: SinglePointerOptions
): Observable<SinglePointer>
```

**Options:**

| Property | Type | Default | Description |
|----------|------|---------|-------------|
| `capture` | `boolean` | `false` | Use capture phase |
| `passive` | `boolean` | `true` | Passive event listener |

## Types

### `SinglePointer`

```typescript
interface SinglePointer {
  phase: PointerPhase;
  x: number;
  y: number;
  timestamp: number;
  pressure: number;       // 0.0 - 1.0
  pointerType: PointerType;
  button: PointerButton;
  deviceId: number;
}
```

### `PointerPhase`

```typescript
type PointerPhase = "start" | "change" | "end" | "cancel";
```

### `PointerType`

```typescript
type PointerType = "mouse" | "touch" | "pen";
```

### `PointerButton`

```typescript
type PointerButton = "none" | "left" | "middle" | "right";
```

## Example: Tracking Pointer Position

```typescript
import { singlePointer } from "@cereb/single-pointer";
import { pipe } from "@cereb/stream";
import { filter } from "@cereb/stream/operators";

const canvas = document.getElementById("canvas")!;

const stream = pipe(
  singlePointer(canvas),
  filter((s) => s.phase === "change")
);

stream.subscribe((pointer) => {
  drawAt(s.x, s.y, s.pressure);
});
```
