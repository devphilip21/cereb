---
title: Buffering Operators
description: Collect values into arrays
---

Operators that collect emissions into arrays before emitting.

## buffer

Collects values until notifier emits.

```typescript
function buffer<T>(notifier: Observable<unknown>): Operator<T, T[]>
```

### Usage

```typescript
import { pipe, fromEvent, interval } from "@cereb/stream";
import { buffer } from "@cereb/stream/operators";

const click$ = fromEvent(document, "click");
const tick$ = interval(1000);

// Collect clicks, emit array every second
const clicksPerSecond$ = pipe(
  click$,
  buffer(tick$)
);

clicksPerSecond$.subscribe((clicks) => {
  console.log(`${clicks.length} clicks in last second`);
});
```

## bufferTime

Collects values for a specified duration.

```typescript
function bufferTime<T>(ms: number): Operator<T, T[]>
```

### Usage

```typescript
import { pipe } from "@cereb/stream";
import { bufferTime } from "@cereb/stream/operators";

// Collect all events in 500ms windows
const batched$ = pipe(
  events$,
  bufferTime(500)
);

batched$.subscribe((batch) => {
  processBatch(batch);
});
```

## bufferWhen

Collects values until closure function's observable emits.

```typescript
function bufferWhen<T>(closingSelector: () => Observable<unknown>): Operator<T, T[]>
```

### Usage

```typescript
import { pipe, timer } from "@cereb/stream";
import { bufferWhen } from "@cereb/stream/operators";

// Buffer until random delay (1-3 seconds)
const buffered$ = pipe(
  source$,
  bufferWhen(() => timer(1000 + Math.random() * 2000))
);
```
