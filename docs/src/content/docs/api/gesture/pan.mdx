---
title: Pan
description: Pan gesture recognition API
---

Pan gesture recognizes dragging movements and provides position, delta, and velocity data.

## Installation

```bash
npm install --save @cereb/pan
```

## Basic Usage

```typescript
import { pan } from "@cereb/pan";

const element = document.getElementById("target")!;
const stream = pan(element, { threshold: 10 });

const unsub = stream.subscribe((event) => {
  console.log(event.deltaX, event.deltaY);
  console.log(event.phase);
});
```

## API

### `pan(options?)`

Creates a pan gesture operator.

```typescript
function pan(options?: PanGestureOptions): Operator<SinglePointer, PanEvent>
```

**Options:**

| Property | Type | Default | Description |
|----------|------|---------|-------------|
| `threshold` | `number` | `0` | Minimum movement before pan starts |
| `direction` | `PanDirection` | `"all"` | Allowed directions |

### `singlePointerToPan(options?)`

Lower-level function to convert SinglePointer stream to PanEvent stream.

## Types

### `PanEvent`

```typescript
interface PanEvent {
  phase: "start" | "change" | "end" | "cancel";
  timestamp: number;
  target: EventTarget;
  x: number;           // Current X position
  y: number;           // Current Y position
  startX: number;      // Starting X position
  startY: number;      // Starting Y position
  deltaX: number;      // Total X displacement
  deltaY: number;      // Total Y displacement
  velocityX: number;   // X velocity (px/ms)
  velocityY: number;   // Y velocity (px/ms)
}
```

### `PanDirection`

```typescript
type PanDirection = "all" | "horizontal" | "vertical";
```

### `PanGestureOptions`

```typescript
interface PanGestureOptions {
  threshold?: number;
  direction?: PanDirection;
}
```

## Example: Draggable Element

```typescript
import { pan } from "@cereb/pan";

const canvas = document.getElementById("canvas")!;
const box = document.getElementById("box")!;

const stream = pan(box, { threshold: 10 });
const unsub = stream.subscribe((event) => {
  switch (event.phase) {
    case "start":
      box.style.setProperty("background-color", "red");
      break;
    case "move":
      box.style.setProperty("transform", `translate(${event.deltaX}px, ${event.deltaY}px)`);
      break;
    case "end":
    case "cancel":
      box.style.removeProperty("background-color");
      break;
  }
});
```
